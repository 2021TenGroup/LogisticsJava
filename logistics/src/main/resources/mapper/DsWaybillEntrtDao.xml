<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.logistics.dao.DsWaybillEntrtDao">

    <resultMap id="BaseResultMap" type="com.logistics.entity.DsWaybillEntrt">
        <!--@Table ds_waybill_entrt-->
        <result property="waybillId" column="waybill_id" jdbcType="INTEGER"/>
        <result property="oId" column="o_id" jdbcType="INTEGER"/>
        <result property="empId" column="emp_id" jdbcType="INTEGER"/>
        <association property="orders" javaType="com.logistics.entity.Orders">
            <id property="oId" column="o_id" jdbcType="INTEGER"></id>
            <result property="outletsId" column="Outlets_id" jdbcType="INTEGER"/>
            <result property="customerId" column="Customer_id" jdbcType="INTEGER"/>
            <result property="dsGoodsId" column="ds_goods_id" jdbcType="INTEGER"/>
            <result property="expressType" column="express_type" jdbcType="INTEGER"/>
            <result property="sender" column="sender" jdbcType="VARCHAR"/>
            <result property="senderPhone" column="sender_phone" jdbcType="VARCHAR"/>
            <result property="postcode" column="postcode" jdbcType="VARCHAR"/>
            <result property="province" column="province" jdbcType="VARCHAR"/>
            <result property="city" column="city" jdbcType="VARCHAR"/>
            <result property="region" column="region" jdbcType="VARCHAR"/>
            <result property="mailingAddress" column="mailing_address" jdbcType="VARCHAR"/>
            <result property="addressee" column="addressee" jdbcType="VARCHAR"/>
            <result property="aPhone" column="a_phone" jdbcType="VARCHAR"/>
            <result property="receivingCode" column="receiving_code" jdbcType="VARCHAR"/>
            <result property="receivingAddress" column="receiving_address" jdbcType="VARCHAR"/>
            <result property="orderSource" column="order_source" jdbcType="INTEGER"/>
            <result property="state" column="state" jdbcType="INTEGER"/>
            <result property="oTime" column="o_time" jdbcType="DATE"/>
            <result property="paymentMethod" column="payment_method" jdbcType="INTEGER"/>
            <result property="serviceCharge" column="service_charge" jdbcType="DOUBLE"/>
            <result property="paymentForGoods" column="payment_for_goods" jdbcType="DOUBLE"/>
            <result property="freight" column="freight" jdbcType="DOUBLE"/>
            <result property="totalRates" column="total_rates" jdbcType="DOUBLE"/>

        </association>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="BaseResultMap">
        select
          waybill_id, o_id, emp_id
        from lms.ds_waybill_entrt
        where waybill_id = #{waybillId}
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="BaseResultMap">
        select
          waybill_id, o_id, emp_id
        from lms.ds_waybill_entrt
        limit #{offset}, #{limit}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="BaseResultMap">
        select
          waybill_id, o_id, emp_id
        from lms.ds_waybill_entrt
        <where>
            <if test="waybillId != null">
                and waybill_id = #{waybillId}
            </if>
            <if test="oId != null">
                and o_id = #{oId}
            </if>
            <if test="empId != null">
                and emp_id = #{empId}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="waybillId" useGeneratedKeys="true">
        insert into lms.ds_waybill_entrt(o_id, emp_id)
        values (#{oId}, #{empId})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update lms.ds_waybill_entrt
        <set>
            <if test="oId != null">
                o_id = #{oId},
            </if>
            <if test="empId != null">
                emp_id = #{empId},
            </if>
        </set>
        where waybill_id = #{waybillId}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from lms.ds_waybill_entrt where waybill_id = #{waybillId}
    </delete>

 <select id="selectByAll" resultMap="BaseResultMap">
     select dwe.*,os.*
     from ds_waybill_entrt dwe
     left join orders os
     on dwe.o_id=os.o_id
 </select>

</mapper>